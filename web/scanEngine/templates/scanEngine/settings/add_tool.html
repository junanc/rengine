{% extends 'base/base.html' %}
{% load static %}
{% block title %}
Add Tool
{% endblock title %}
{% block custom_js_css_link %}
{% endblock custom_js_css_link %}
{% block breadcrumb_title %}
<li class="breadcrumb-item"><a href="{% url 'tool_arsenal' %}">Tool Arsenal</a></li>
<li class="breadcrumb-item active">Add Tool</li>
{% endblock breadcrumb_title %}
{% block page_title %}
Add Tool
{% endblock page_title %}
{% block main_content %}
<div class="row">
  <div class="col-xl-12">
    <div class="card">
      <div class="card-body">
        <form method="post">
          {% csrf_token %}
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3 has-error">
                <label for="tool_name" class="form-label">Tool Name <span class="text-danger">(Required)</span></label>
                {{form.name}}
                {% if form.errors.name %}
                <span class="text-danger">
                  {{form.errors.name}}
                </span>
                {% endif %}
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="tool_category" class="form-label">Tool Category</label>
                <select class="select form-control" id="tool_category" name="tool_category" required>
                  <option value="subdomain">Subdomain Gathering</option>
                  <option value="other">Other</option>
                </select>
              </div>
              <input type="checkbox" name="is_subdomain_gathering" checked style="display:none;">
            </div>
            <div class="col-md-12">
              <div class="mb-3">
                <label for="field-4" class="form-label">Github URL <span class="text-danger">(Required)</span></label>
                {{form.github_url}}
                {% if form.errors.github_url %}
                <span class="text-danger">
                  {{form.errors.github_url}}
                </span>
                {% endif %}
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="tool_logo_url" class="form-label">Tool Logo (URL) <span class="text-muted">(Optional)</span></label>
                {{form.logo_url}}
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="license_url" class="form-label">Tool License URL <span class="text-muted">(Optional)</span></label>
                {{form.license_url}}
              </div>
            </div>
            <div class="col-md-12">
              <div class="mb-3">
                <label for="tool_description" class="form-label">Description<span class="text-muted">(Optional)</span></label>
                {{form.description}}
              </div>
            </div>
            <h5>Tool Installation Process</h5>
            <div class="row">
              <div class="col-md-12">
                <div class="mb-3">
                  <label class="form-label">How does this tool install?</label><br>
                  <div class="form-check form-check-inline">
                    <input type="radio" id="github_clone" name="tool_installation_process" class="form-check-input">
                    <label class="form-check-label" for="github_clone">Github Clone</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input type="radio" id="go_installation" name="tool_installation_process" class="form-check-input" checked="">
                    <label class="form-check-label" for="go_installation">Go Installation</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input type="radio" id="other_installation" name="tool_installation_process" class="form-check-input">
                    <label class="form-check-label" for="other_installation">Other</label>
                  </div>
                </div>
              </div>
              <p class="text-muted">(Please note that any commands here will directly execute in shell, so please be careful of the commands you are using.)</p>
              <div class="col-md-12">
                <div class="mb-3">
                  <label for="tool_logo_url" class="form-label">Installation Command <span class="text-danger">(Required)</span></label>
                  <p>
                    <ul>
                      <li>
                        If the tool has to be installed using github clone, then your installation command would be
                        <br>
                        <code> git clone https://github.com/user/tool </code>
                      </li>
                      <li>
                        If the tool has to be installed using <span class="badge badge-secondary">Go</span>, the your installation command would be
                        <br>
                        <code>go install -v github.com/tool@latest</code>
                        <br>
                        <div class="alert alert-warning mt-2 alert-text-fit" role="alert">
                          Please note that, go get command is no longer supported by go. Instead you should use go install. <a href="https://go.dev/doc/go-get-install-deprecation"> Learn why! </a>
                        </div>
                      </li>
                    </ul>
                  </p>
                  <label for="install_command" class="form-label">Installation Command <span class="text-danger">(Required)</span></label>
                  {{form.install_command}}
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="mb-3">
                <label for="tool_update" class="form-label">How does this tool update? (Optional)</label>
                <p>
                  Note:
                  <ul>
                    <li>If the tool is installed using git clone, it is recommended to use <code>git pull</code> for updating.</li>
                    <li>If the tool is installed using go, it is recommended to use the same command as go install.</li>
                  </ul>
                </p>
                <br>
                <label for="update_command" class="form-label">Update command</label>
                <span class="text-muted">(We have auto generated this for you based on your installation steps)</span>
                {{form.update_command}}
                {% if form.errors.update_command %}
                <span class="text-danger">
                  {{form.errors.update_command}}
                </span>
                {% endif %}
              </div>
            </div>
            <div class="col-md-12">
              <div class="mb-3">
                <label for="tool_update" class="form-label">Version match regex (Optional)</label>
                <p>
                  reNgine needs the version match regex to find out if there is any update available or not. You can check how the tool displays the version number and we can generate the regex for you. Or you can do that manually as well.
                  <br>
                  <div class="alert alert-warning mt-2 alert-text-fit" role="alert">If version regex is not given, we will not be able to check the updates automatically.</div>
                </p>
                <label for="version_match_regex" class="form-label">Version Regex</label>
                {{form.version_match_regex}}
                {% if form.errors.version_match_regex %}
                <span class="text-danger">
                  {{form.errors.version_match_regex}}
                </span>
                {% endif %}
              </div>
            </div>
            <div class="row mt-3">
              <div class="col-12">
                <input type="submit" class="btn btn-primary float-end ps-4 pe-4" value="Add Tool">
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock main_content %}
{% block page_level_script %}
<script src="{% static 'custom/custom.js' %}"></script>
<script type="text/javascript">
</script>
{% endblock page_level_script %}
